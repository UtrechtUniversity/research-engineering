---
description: >-
  With Terraform you can setup your AWS infrastructure with a simple script.
  This produces reusable recipes and avoids the time-consuming process of
  setting up infrastructure by using the AWS website.
---

# Terraforming AWS Infrastructure

{% hint style="info" %}
Crunchbase is a research project to assess the sustainability of European startup-companies by analyzing their websites. **Terraform** is used to set up an AWS workflow for collecting and analyzing webpages from the Internet Archive. Check the [code](https://github.com/UtrechtUniversity/ia-webscraping) on Github for more information.&#x20;
{% endhint %}

### Introduction

[Terraform](https://www.terraform.io/intro/index.html]) is an infrastructure as code (IaC) tool that allows you to define resources and infrastructure in human-readable, declarative configuration file. In that way you can build, change, version and reuse your infrastructure safely and efficiently. Terraform can manage infrastructure on multiple cloud platforms like Amazon Web Services (AWS), Azure, Google Cloud Platform (GCP) and Kubernetes.

### Prerequisites

* [Install Terraform](https://learn.hashicorp.com/tutorials/terraform/install-cli?in=terraform/aws-get-started)
* Set up your account at [AWS ](https://aws.amazon.com/premiumsupport/knowledge-center/create-and-activate-aws-account/)or an other cloud platform

### &#x20;Workflow

Roughly, the terraform workflow can be described as

**Scope **-  Identify the infrastructure for your project.

**Author** - Write the configuration for your infrastructure; get started [here](https://learn.hashicorp.com/tutorials/terraform/aws-build?in=terraform/aws-get-started)

```
$ terraform init
```

The terraform init command is used to initialize a working directory containing Terraform configuration files. This is the first command that should be run after writing a new Terraform configuration or cloning an existing one from version control. It is safe to run this command multiple times.

```bash
$ terraform plan
```

The terraform plan command is used to create an execution plan. Terraform performs a refresh, unless explicitly disabled, and then determines what actions are necessary to achieve the desired state specified in the configuration files. The optional -out argument can be used to save the generated plan to a file for later execution with terraform apply, which can be useful when running Terraform in automation.

```bash
$ terraform apply
```

The terraform apply command is used to apply the changes required to reach the desired state of the configuration, or the pre-determined set of actions generated by a terraform plan execution plan. By using the “plan” command before “apply,” you’ll be aware of any unforeseen errors or unexpected resource creation/modification!

```bash
$ terraform destroy
```

Once you no longer need infrastructure, you may want to destroy it to reduce your security exposure and costs. The terraform destroy command terminates resources managed by your Terraform project.

### Configuration&#x20;

![Simple terraform folder structure](<../.gitbook/assets/tf\_structure (3).png>)

#### Variables

Variables allow you to store shared or repeating configuration values, which in turn keeps your code easy to manage and update. To use variables in Terraform all you have to do is declare your variable somewhere in your configuration and later reference your variable in your resource configurations.&#x20;

When you declare variables in child modules, the calling module should pass values in the module block. When you declare them in the root module, you can set their values using CLI options or environment variables. It is also possible to specify variables in a dedicated file named `.tvars `or `tvars.json` and then specify that on the command line like

```bash
$ terraform apply -var-file="testing.tfvars"
```

To allow Terraform to automatically load the variables, the file should be named `terraform.tfvars` or `*.auto.tfvars` and placed in the same directory as your Terraform configuration file.

#### Modules&#x20;

Modules in their simplest are containers for multiple resources that are often used together. You may compare them to function definitions in other programming languages. Modules can also be called multiple times, either within the same configuration or in separate configurations, allowing resource configurations to be packaged and re-used.
